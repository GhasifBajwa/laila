<style>
  @font-face {
    font-family: "CenturySchoolbook";
    src: url("{{ 'SCHLBKB.TTF' | asset_url }}") format("truetype");
  }
  .collection_heading {
    padding: 20px;
  }

  .collection_heading img {
    height: 20px;
    width: 250px;
    /* object-fit: cover; */
  }
  .collection_heading p {
    width: 720px;
    margin-top: 30px;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -4%;
    font-family: CenturySchoolbook;
    line-height: 20px;
  }
</style>

{% comment %} Static Shopify section for the SEED collection gallery and filter navigation {% endcomment %}
{% assign collection_handle = request.params.collection %}
{% assign collection = collections[collection_handle] %}

{% if collection %}
  <section>
    <div class="Filter-nav">
      <ul class="Filter-nav-links">
        <li>
          <a href="{{ collections.all.url }}">ALL</a>
        </li>
        {% assign product_types = collections.all.products | map: 'type' | uniq %}
        {% for type in product_types %}
          <li>
            <a href="{{ collections.all.url }}?type={{ type | url_encode }}">{{ type | upcase }}</a>
          </li>
        {% endfor %}
      </ul>
      <div class="filter">
        <img src="{{ 'icon_filter.png' | asset_url }}" alt="Filter Icon" />
        <span>FILTER</span>
      </div>
    </div>
  </section>

  <section>
    <div class="collection_heading">
      {% if collection.image %}
        <img src="{{ collection.image | image_url: width: 600 }}" alt="{{ collection.title }}" />
      {% endif %}
      <p>{{ collection.description | escape | newline_to_br }}</p>
    </div>
  </section>

  <section>
{% comment %} Get the collection handle from URL ?collection=... {% endcomment %}
{% assign collection_handle = request.params.collection %}
{% assign collection = collections[collection_handle] %}

{% comment %} Debug Output (Remove later) {% endcomment %}
<p><strong>Debug:</strong></p>
<p>URL Parameter: <code>{{ request.params.collection }}</code></p>
<p>Collection Handle: <code>{{ collection_handle }}</code></p>
<p>Collection Found: <code>{{ collection.title | default: "NOT FOUND" }}</code></p>
<p>Products: <code>{{ collection.products.size }}</code></p>

{% if collection %}
  <!-- Your existing collection display code -->
  <h1>{{ collection.title }}</h1>
  <p>{{ collection.description }}</p>
  
  {% for product in collection.products %}
    <div>
      <a href="{{ product.url }}">
        <img src="{{ product.featured_image | img_url: '300x' }}" alt="{{ product.title }}">
        <h3>{{ product.title }}</h3>
        <p>{{ product.price | money }}</p>
      </a>
    </div>
  {% else %}
    <p>No products in this collection.</p>
  {% endfor %}
{% else %}
  <p><strong>Error:</strong> Collection <code>{{ collection_handle }}</code> not found.</p>
{% endif %}
  </section>
{% else %}
  <p>Error: Collection "{{ collection_handle }}" not found.</p>
{% endif %}
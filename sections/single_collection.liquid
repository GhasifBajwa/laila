<style>
  @font-face {
    font-family: "CenturySchoolbook";
    src: url("{{ 'SCHLBKB.TTF' | asset_url }}") format("truetype");
  }
  .collection_heading {
    padding: 20px;
  }

  .collection_heading img {
    height: 20px;
    width: 250px;
    /* object-fit: cover; */
  }
  .collection_heading p {
    width: 720px;
    margin-top: 30px;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: -4%;
    font-family: CenturySchoolbook;
    line-height: 20px;
  }
</style>

{% comment %} Static Shopify section for the SEED collection gallery and filter navigation {% endcomment %}
{% assign collection_handle = "seed" %} <!-- Use lowercase handle -->
{% assign collection = collections[collection_handle] %}

{% comment %} Debug Output {% endcomment %}
<!-- 
Debug:
- URL Parameter: {{ request.params.collection }}
- Collection Handle: {{ collection_handle }}
- Collection Found: {{ collection.title | default: "NOT FOUND" }}
- Products: {{ collection.products.size }}
-->

{% if collection %}
  <section>
    <div class="Filter-nav">
      <ul class="Filter-nav-links">
        <li>
          <a href="{{ collections.all.url }}">ALL</a>
        </li>
        {% assign product_types = collections.all.products | map: 'type' | uniq %}
        {% for type in product_types %}
          <li>
            <a href="{{ collections.all.url }}?type={{ type | url_encode }}">{{ type | upcase }}</a>
          </li>
        {% endfor %}
      </ul>
      <div class="filter">
        <img src="{{ 'icon_filter.png' | asset_url }}" alt="Filter Icon" />
        <span>FILTER</span>
      </div>
    </div>
  </section>

  <section>
    <div class="collection_heading">
      {% if collection.image %}
        <img src="{{ collection.image | image_url: width: 600 }}" alt="{{ collection.title }}" />
      {% endif %}
      <p>{{ collection.description | escape | newline_to_br }}</p>
    </div>
  </section>

  <section>
    <h1>{{ collection.title }}</h1>
    
    {% if collection.products.size > 0 %}
      <div class="product-grid">
        {% for product in collection.products %}
          <div class="product">
            <a href="{{ product.url }}">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x' }}" alt="{{ product.title }}" loading="lazy">
              {% endif %}
              <h3>{{ product.title }}</h3>
              <p>{{ product.price | money }}</p>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>No products found in this collection.</p>
      
      {% comment %} Additional debug info {% endcomment %}
      <div style="background: #f8f8f8; padding: 15px; margin-top: 20px;">
        <h4>Debug Information:</h4>
        <p>Collection Handle: <strong>{{ collection.handle }}</strong></p>
        <p>All Collection Handles Available:</p>
        <ul>
          {% for c in collections %}
            <li>{{ c.title }} ({{ c.handle }})</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </section>
{% else %}
  <p>Error: Collection "{{ collection_handle }}" not found.</p>
  
  {% comment %} Show available collections for debugging {% endcomment %}
  <div style="background: #f8f8f8; padding: 15px; margin-top: 20px;">
    <h4>Available Collections:</h4>
    <ul>
      {% for c in collections %}
        <li>{{ c.title }} ({{ c.handle }})</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}